import{_ as e,o as a,c as r,V as l}from"./chunks/framework.b31a4d00.js";const f=JSON.parse('{"title":"从 2.x 迁移到 3.x","description":"","frontmatter":{},"headers":[],"relativePath":"guide/upgrade3.md"}'),i={name:"guide/upgrade3.md"},t=l('<h1 id="从-2-x-迁移到-3-x" tabindex="-1">从 2.x 迁移到 3.x <a class="header-anchor" href="#从-2-x-迁移到-3-x" aria-label="Permalink to &quot;从 2.x 迁移到 3.x&quot;">​</a></h1><h2 id="版本-3-x-的-break" tabindex="-1">版本 3.x 的 break <a class="header-anchor" href="#版本-3-x-的-break" aria-label="Permalink to &quot;版本 3.x 的 break&quot;">​</a></h2><ol><li>编译时的 <a href="./../reference/config//#base">base</a> 配置，移到了 <a href="./../reference/config//#router">router.base</a> 下。</li><li><a href="https://github.com/webpack/webpack-dev-server" target="_blank" rel="noreferrer">webpack-dev-server</a> 从 <code>v3.x</code> 升级到了 <code>v4.x</code>，如果遇到配置不兼容，可以查看<a href="https://github.com/webpack/webpack-dev-server/blob/master/migration-v4.md" target="_blank" rel="noreferrer">webpack-dev-server 3.x 升级 4.x</a>。</li><li><a href="./../reference/plugin/plugins/layout.html#_4-x-升级到-5-x">layout 插件</a> 有一些属性变更</li><li><a href="./../reference/plugin/plugins/request.html#_2-x-升级到-3-x">request 插件</a> 有一些参数变更，升级请使用最新版本</li></ol><h2 id="继续使用-webpack" tabindex="-1">继续使用 Webpack <a class="header-anchor" href="#继续使用-webpack" aria-label="Permalink to &quot;继续使用 Webpack&quot;">​</a></h2><ol><li>添加 Webpack 构建依赖包： <code>npm i @fesjs/builder-webpack -D</code>。</li><li><code>dev</code> 的 <code>publicPath</code> 配置不能为 <code>./</code>，请更改为 <code>auto</code></li><li>将 html 模版文件从 <code>public/index.html</code> 挪到项目根目录，移除 <a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noreferrer">html-webpack-plugin</a> 相关配置，具体模版变量使用请查看<a href="./../guide/template.html">HTML 模版</a>。</li></ol><h2 id="换成-vite" tabindex="-1">换成 Vite <a class="header-anchor" href="#换成-vite" aria-label="Permalink to &quot;换成 Vite&quot;">​</a></h2><ol><li>安装依赖包 <code>npm i @fesjs/builder-vite</code>。</li><li>将 Webpack 相关的配置换成 Vite，具体可查看<a href="./../reference/config/">配置</a>。</li><li>将 html 模版文件从 <code>public/index.html</code> 挪到项目根目录，如果有相应的 <a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noreferrer">html-webpack-plugin</a> 配置，需要改成 <a href="https://github.com/vbenjs/vite-plugin-html" target="_blank" rel="noreferrer">vite-plugin-html</a> 的写法。</li><li>将 <code>require</code> 等 Vite 不支持的代码，改写成 Vite 支持的方式。</li></ol><h2 id="插件" tabindex="-1">插件 <a class="header-anchor" href="#插件" aria-label="Permalink to &quot;插件&quot;">​</a></h2><p>插件都需要升级到 <code>3.x</code> 版本，新版添加了兼容<code>builder</code>的逻辑，但是提供的接口和配置没有变化，只需要升级版本即可使用。</p><ul><li><a href="./../reference/plugin/plugins/layout.html">@fesjs/plugin-layout</a> 需要升级到<code>5.0.x</code>版本。</li><li><a href="./../reference/plugin/plugins/locale.html">@fesjs/plugin-locale</a> 需要升级到<code>4.0.x</code>版本。</li><li><a href="./../reference/plugin/plugins/qiankun.html">@fesjs/plugin-qiankun</a> 由于<code>qiankun</code>技术限制，子应用目前还只能使用 Webpack 构建。</li></ul>',10),o=[t];function c(n,d,h,u,p,s){return a(),r("div",null,o)}const m=e(i,[["render",c]]);export{f as __pageData,m as default};
